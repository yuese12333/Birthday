<div align="center">

# 溜溜生日礼物项目

## 总览

| 场景编号 | 标题关键词       | 玩法核心                              | 状态          |
| -------- | ---------------- | ------------------------------------- | ------------- |
| 0        | 注册仪式         | 纪念日密码                            | 已基本实现 ✅ |
| 1        | 穿越高中         | 纯分支对话（dialogue_x_y + win/fail） | 正在实现 ✅   |
| 2        | 高考小游戏       | 四科考试                              | 正在实现 ✅   |
| 3        | 心动瞬间         | 数织解谜                              | 已实现首版 ✅ |
| 4        | 表白（占位）     | 玩法待设计（当前跳转占位）            | 占位 ✅       |
| 5        | 约会卡牌         | 多关卡卡牌组合 + 外部化协同规则       | 已初步实现 ✅ |
| 6        | 织围巾（占位）   | 玩法待设计（当前跳转占位）            | 占位 ✅       |
| 7        | 未来愿望（占位） | 玩法待设计（当前跳转占位）            | 占位 ✅       |
| 8        | 终章（占位）     | 生日祝福+成就展示                     | 占位 ✅       |

</div>

---

## 🔧 快速开始

1. 下载或克隆项目,用浏览器打开根目录下 `index.html`。
2. [点此打开网站](https://yuese12333.github.io/Birthday/)

---

## 📁 目录结构

```
assets/
  images/            # 图片（自备真实照片可更有代入感）
  audio/             # 计划中的 BGM / SFX
css/                 # 全局 + 场景样式（集中在 styles.css）
js/
  core/              # BaseScene / SceneManager / EventBus 等基类
  scenes/            # 场景 0~7 源文件
  main.js            # 入口（注册场景 & 全局防抖 & 快捷键）
data/                # 外部数据文件（题库 / 脚本 / 关卡）
index.html           # 入口 HTML
diary.md             # 每日记录
README.md
```

---

## 🧭 场景总览（按体验顺序）

### 0. 注册仪式（Scene0Register）

**当前实现**

- 输入任意“用户名” + 纪念日密码（`20241007`）。
- 背景音乐（BGM）自动播放，使用正确的 key '0' 管理，确保静音/停止逻辑无误。
- 若自动播放失败，3 秒后页面顶部会弹出“点我播放音乐”按钮，用户可手动解锁音频。
- 密码输入时输入生日（`20051005`或`20051210`）会有特殊彩蛋。
- 点击“我忘了”按钮会出现 1~4 个生气表情，第 5 次出现哭脸表情并禁用按钮。
- 输入错误会依次显示生气提示，第 5 次出现哭脸，第 6 次自动退出网页。
- 每次密码错误或点击“我忘了”按钮，都会禁用音乐（静音并置灰按钮），且无法恢复。
- 错误与表情提示采用统一结构，支持动画效果。
- 全局点击防抖：提交、忘记按钮均带 `data-debounce`。
- debug 面板可一键跳转任意场景，方便开发调试。

**未来预期**

- 主题可配置：不同纪念日切换背景 / 标题文案。

**debug**

- 可以通过 debug 面板进入任意场景。
- 可通过 debug 面板清空成就。

### 1. 穿越高中（Scene1Intro）

**当前实现（统一命名 + 失败推进 + 扩展 fail:x）**

- 外部脚本驱动：`data/scene1_script.json`。
- 阶段命名强制：`dialogue_<failCount>_<seq>`；入口固定 `dialogue_0_1`。
- 分支支持特殊 goto：`win` / `fail`。
  - `win`：显示成功 overlay → 过渡到下一正式场景（当前为 `exam`）。
  - `fail`：显示失败 overlay → 自动跳转 `dialogue_{当前failCount+1}_1`。
  - 特殊 token 匹配大小写不敏感，并会自动 trim（如 " WIN " 仍被识别）。
- 去除旧 fallback：假设脚本必然成功加载且结构正确。
- 打字机：对话文字逐个出现，空格 / 点击空白提前补全或推进下一行。
- 打字机音效：每两个有效字符（中英文数字）播放一声，降低噪点。
- 说话人徽标：`me` 、`her` 、`system` 。
- 移动端：pointerup + touchend 兜底防丢点击。

**脚本字段**

- meta: `{ version, desc, wintext}`
- Stage: `{ id, lines:[{speaker,text}], choices:[{text,win,goto}] }`

**行为流程（dialogue_x_y 版本）**

1. 起点：`dialogue_0_1`。
2. 播放 `lines`（空格 / 点击空白推进；打字中再次触发补全）。
3. 播放完：若存在 `end` → 转场；否则渲染 `choices`。
4. 分支优先判定 `choice.win`：

- `true` → win overlay → 下一场景。
- `false` → fail overlay → `dialogue_{failCount+1}_1`。
- `null` / 缺省 → 继续看 `goto`。

5. 普通 `goto`：跳 `dialogue_*_*`（若阶段不存在给短暂提示 + console.warn）。
6. goto 解析前依旧会 trim + 小写判断特殊 token（仅兼容阶段），普通阶段 ID 按原值匹配。

**扩展预留（尚未实现）**

- tagsAdd：为后续场景准备上下文标签。
- 行级 typingSpeed：个别台词节奏。
- 条件过滤：requireTags / excludeTags。
- 路径统计：用于终章个性化总结。

**剧情梗概**

（占位，尚未设计完成）

---

### 2. 高考小游戏（Scene2Exam）

**当前实现（最新）**

1. BGM：进入自动尝试淡入播放（失败可点音符解锁），离场淡出；使用场景 key `2` 管理。
2. 科目顺序：语文 → 数学 → 英语 → 理综，需依次完成（已完成科可回看但不再计时）。
3. 单科 5 分钟倒计时：进入科目启动；完成或超时后停止；与下一科之间若 30 秒未开始出现“懒散提醒”彩蛋行。
4. 外部题库：强制依赖 `data/scene2_questions.json`；加载成功后完全覆盖（无 fallback 题库）。
5. 题目结构外部可配置 `questionType`（渲染/交互方式）与 `difficulty`（easy|medium|hard）。
6. 难度权重：easy=1 / medium=2 / hard=3；统一得分公式：`gained = 2 * weight`。
7. 宠溺模式：正确 / 错误（被宠）/ 跳过 / 第三次提示 均给予完整得分（并标记不同来源统计）。
8. 提示三段：第 1、2 次依次累积显示 hints；第 3 次直接自动判定正确并揭示答案、加分、锁题。
9. 题型注册表：`QUESTION_TYPE_REGISTRY` 统一渲染输入控件；`extractUserAnswer()` + `isAnswerCorrect()` 统一答案采集与判定，新增题型只需在注册表 + 判定/抽取函数中补分支。
10. 彩蛋互斥优先级：全跳过 > 全自动提示通过 > 全错误宠溺（使用 GIF 图块）。
11. 汇总面板：总题数 / 得分 / 动态评价 / 彩蛋展示。

**未来预期（AI 生成）**

- Serious 模式：跳过 0 分 / 错误 0 分或扣分 / 第三次提示仅揭示答案不加分。
- 成就体系：全对 / 无提示 / 仅一次提示 / 全跳过 / 全错被宠 / 全第三次提示。
- 统计可视化：题型分布、得分来源堆叠、提示使用率雷达。
- 新题型：multiSelect / dragMatch / order / audio / image-hotspot（均通过注册表扩展）。
- 与前后场景联动：根据跳过/错误率影响后续台词情感细节。

**宠溺/得分与提示规则速览 ❤️**

- 分数：根据题型设置分数。（原为根据难度）
- 统一加分来源：正确 / 错误被宠 / 跳过 / 第三次提示自动完成 → 都走同一公式（区分来源做标记）。
- 提示：前两次显示 `hints[0]`、`hints[1]`（缺失安全回退）；第 3 次自动揭示答案并锁题。
- 彩蛋优先级：全跳过 > 全第三次提示 > 全错误宠溺（互斥）。

**外部题库**

本项目的场景 2（高考小游戏）强依赖一个外部题库文件：`data/scene2_questions.json`。

该文件在场景初始化时会被 fetch 并完全覆盖内置题库（无回退），因此在部署或共享项目时请务必包含并校验该文件。

用途与要求：

- 用途：提供四科（语文、数学、英语、理综）的题目与元信息，供场景按固定顺序加载与渲染。
- 必需性：若缺失或解析后为空，场景会抛错并停止（项目设计为外部题库为必需资源）。
- 可配置项：每道题可以包含字段`questionType`，`difficulty`，`question`，`answer`，`hints`，`encourageCorrect`，`encourageWrong`等

---

### 3. 心动瞬间（Scene3Timeline）

**游玩流程与玩法体验（按时间线顺序）**

1. 进入场景，自动播放大学专属 BGM，页面加载首个数织谜题（9x9）。
2. 屏幕中央显示谜题网格，左边/顶部分别为行列线索（自动根据谜题 matrix 生成）。
3. 玩家通过点击/触摸操作：

- 左键/点按：空格与涂色循环切换。
- 右键/长按：以特殊颜色标记（用于排除，仅辅助，不影响判定）。
- 支持拖拽批量涂色/擦除，首次按下决定批量模式。

4. 每次操作后，系统自动判定当前解答是否完全正确（所有应涂色格均涂满且无多余）。
5. 如遇卡关，可点击“提示”按钮：

- 若仍有应涂色但未涂的格子：随机点亮一个正确目标格（仅单格，不剧透整段）。
- 若应涂色格已全部涂满但仍未完成（存在多余涂色）：会随机取消一个错涂的格子，并以特殊颜色标记出来，便于修正。

6. 解出谜题后，触发完成动画：
   - 网格淡出。
   - 下方原图缓慢淡入，数字线索自动隐藏，突出图片。
   - 图片完成淡入后，自动分裂为四份，分别飞向四个角落，形成纪念拼贴。
   - 每完成一题，分裂图片会累积到四个角。
   - “下一题”按钮显现，点击进入下一个谜题。
7. 多题连续游玩时，已完成图片会持续保留在角落，形成时间线式的心动瞬间拼贴。
8. 最后一题完成后，四张图片均展现，这时大图会淡出，并淡入最后的成品图。
9. 最后一题完成后，“进入下一幕”按钮出现，点击进入下一幕场景。
10. 若外部谜题 JSON 加载失败，系统会自动回退到占位图片模式，保证流程不被中断。

**动画与反馈细节**

- 分裂动画采用缩放+位移，视觉上模拟心动瞬间被定格到四个角落。
- 每题完成后，原图淡入与分裂动画衔接，保证解谜成就感。
- 按钮与提示均有防抖和无障碍处理，移动端支持触摸优化。
- 进度条实时显示当前关卡进度，便于玩家掌控节奏。

**特殊机制**

- 仅前四题的图片会分裂并保留，超过四题后只隐藏原图不再分裂，防止拼贴溢出。
- 谜题顺序与 JSON 中 meta.index 保持一致，支持自定义关卡。

> 这一幕聚焦“解谜乐趣 + 动画纪念 + 进度拼贴”，每一次心动都被视觉化地保留在时间线的四个角落。

---

### 4. 表白（Scene4Confession）

当前为占位：原计划“多段逐行表白 + 分支回应”玩法尚未设计完成。页面仅显示占位说明、BGM 按钮与“进入下一幕”按钮（带转场 flash45）。

未来计划（草案）：

- 无

---

### 5. 第一次约会（Scene5Date）

**当前实现（外部数据驱动 - 初版）**

- 外部 JSON：`data/scene5_levels.json` 定义 `levels[]`，每关自带 `cards` / `pick:[min,max]` / `targetTags` / `synergyRules`。
- 完全每关独立卡池：不再共用全局卡牌，方便做“主题差异化”关卡。
- 协同评分引擎（rule engine）：当前内置两类
  - `set`：指定 `ids` 全被选中触发（固定组合）
  - `tagCombo`：标签组合（`all=true` 需全部包含；否则任一命中即可）
- 评分拆分：基础分 (base) + 目标标签匹配数 (targetBonus) + 协同加成 (synergyBonus)。
- 漂浮提示：每条协同命中即时弹出一次性气泡。
- 结算后锁卡：防止提交后再改动导致分数漂移。
- 最终总结：动态估算“理论最大值”（粗略：topN 基础分 + 所有目标标签数 + 所有规则 bonus 总和）并给出评价。
- BGM 使用统一场景 key `5`，支持静音切换。
- JSON 加载失败 fallback：提供最小占位一关不阻断流程。

**未来扩展方向（AI 生成）**

- 更多规则类型：`ratio`（某类标签占比 ≥ 阈值）、`sequence`（按展示顺序挑选）、`avoidConflict`（同时出现减分 / 触发替换）、`pairPrefer`（成对出现加倍）。
- 分档评价表：外部提供 scoreRatio → 文案映射取代硬编码 if/else。
- 稀有度 / 花费系统：增加 `cost` 字段与关卡“预算”上限，鼓励策略选牌。
- 推荐提示：结算时展示“少选/错过这些即可 +X 分”。
- 成就：全关命中全部目标标签；首次尝试即 ≥90%；任意关卡 0 协同但高分（“逆风翻盘”）。
- 组合回放：终章引用最高协同关卡组合描述个性化文案。

> 当前实现目标聚焦“外部化 + 引擎基础”；复杂视觉（连接线/发光）与策略资源机制尚未加入。

---

### 6. 织围巾（Scene6Scarf）

当前为占位

未来计划（草案）：

- 无

---

### 7. 未来愿望星空（Scene7Future）

当前为占位：展示简单说明文本与“进入最终祝福”按钮。

未来计划（草案）：

- 无

---

### 8. 终章（Scene8Final）

当前为占位：展示简单祝福文本与“重新开始”按钮。

> 终章与愿望场景之间可插入转场动画（flash12 / 自定义 memory）。
> 当前为占位：未来计划是“输入愿望 → 星星随机落点 → 达到阈值触发终章祝福”。目前版本为保证旅程闭环，仅保留占位说明与“进入最终祝福”按钮，点击后展示简化祝福文案。

未来计划（AI 生成）：

- 星星标签分类（旅行 / 成长 / 仪式 / 情感）不同色彩与轻微闪烁频率。
- 单星点击回显 & 编辑 / 标记完成。
- 统计引用：结合 Scene2 答题统计 + Scene5 协同最高组合生成个性化总结段落。
- 愿望热度：根据输入关键词（旅行/看海/电影）触发不同特效（波纹 / 流星 / 光晕）。
- 保存与回放：localStorage 持久化愿望列表（首次与后续追加区分展示）。

---

## 🛡️ 全局机制

| 机制           | 描述                                                                                                                                                                 |
| -------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 场景管理       | `SceneManager` 控制生命周期 enter/exit，防并发切换锁。                                                                                                               |
| 转场场景 (NEW) | `TransitionScene` 手动调用过渡：支持 `flash12`（原 heart） / `flash45`（闪回图片序列 + 独立一次性音效），默认关闭自动插入；显式 `this.ctx.go('transition', {...})`。 |
| 事件总线       | `EventBus`（当前轻量，预留解耦扩展）。                                                                                                                               |
| 全局防抖       | 任意元素加 `data-debounce` 即可，捕获阶段阻断重复点击。                                                                                                              |
| 本地持久       | （已精简：注册标记机制移除，当前无全局持久状态）                                                                                                                     |
| 外部题库       | 自动 fetch `data/scene2_questions.json` 覆盖内置。                                                                                                                   |
| 彩蛋系统       | 目前分散（场景 1 标题点击 / 场景 2 结果统计），后续计划集中注册。                                                                                                    |
| 移动端适配     | 时间线触摸点选交换 / 围巾拖动连续涂抹 / 按钮命中区域放大 — ✔ 已完成首轮                                                                                              |

---

## 📱 移动端适配说明

近期完成：

- 时间线：触摸端自动启用“点选两项交换”模式（无原生拖拽兼容问题）。
- 围巾：指针按下进入绘制模式，滑动连续点亮；指针抬起/取消即结束。
- 样式：触摸环境放大按钮与卡牌内边距；围巾格子尺寸放大；禁用绘制区域滚动。
- 检测：使用 `(pointer:coarse)` 作为触摸环境判定，不影响桌面逻辑。

待改进：

- pointermove 高频：可做节流（每 ~8ms 合并）。
- 触觉反馈：调用 `navigator.vibrate`（需用户手势授权）。
- 橫屏布局微调：围巾栅格自适应换行。

---

## 🧩 自定义常用入口

- 修改题库：放置 / 编辑 `data/scene2_questions.json`。
- 修改高中场景对话脚本：`data/scene1_script.json`（信任阶段/解锁后台词外部化，可追加阶段）。
- 增减时间线事件：`scene3_timeline.js` 的 `this.items`。
- 增加表白台词：`scene4_confession.js` 中对话数组。
- 约会关卡：编辑 `data/scene5_levels.json`（卡牌 / 关卡 / 协同）。
- 围巾尺寸：`scene6_scarf.js` 中网格行列参数。
- 愿望阈值：`scene7_future.js` 中 `this.required`。
- 转场动画：`scene_transition.js` 可扩展 `style` 分支（已含 `flash12` / `flash45`，可自行新增 `petal` 等）。

TODO（后续将逐步用转场包装的跳转示例）：

```
intro -> exam        ✅ 已接入
exam -> timeline     ⏳ 待接入
timeline -> confession ⏳ 待接入
confession -> date   ✅ 已接入
date -> scarf        ⏳ 待接入
scarf -> future      ⏳ 待接入
```

---

## 🎬 转场系统 (Transitions & SFX)

手动在任一场景调用：

```js
this.ctx.go('transition', {
  next: 'date', // 进入的下一个场景 ID
  style: 'flash45', // flash12 | flash45 | (自定义 petal / memory ...)
  images: ['.../mem_4_1.jpg', '.../mem_4_2.jpg'], // 仅 flash45 需要
  duration: 4000, // ms；显式提供时不会被内部重算覆盖
  sound: './assets/audio/flash_45.mp3', // 一次性音效（优先级最高，统一 flash_<from><to> 命名）
  tip: '那些瞬间像流光一样掠过…',
  useBGM: false, // true 则忽略一次性音效，使用过渡 BGM
});
```

### 时长优先级

| 条件           | 使用规则                         |
| -------------- | -------------------------------- |
| 传入 duration  | 直接使用，不再按帧数改写         |
| 未传 & flash45 | 帧数 \* 260ms ，钳制 1800~4500ms |
| 未传 & flash12 | 使用默认构造时长 (3000ms)        |

#### 关于缺失转场音效的健壮性

若某次转场未放置对应 `flash_<from><to>` 文件（且若使用 flash12 样式也不存在 `transition_flash12.(wav|mp3|ogg)` 兜底），系统回退链为：

1. 显式 `data.sound`
2. `flash_<from><to>.(mp3|wav|ogg)`
3. （无命中且未 useBGM）播放一次性过渡 BGM；不会报错，仅缺少特定短音效层。

### 音效优先级（纯净版）

1. 显式 `sound`
2. `flash_<from><to>.{mp3,wav,ogg}`（统一命名）
3. `transition_<style>.{wav,mp3,ogg}`（风格兜底）
4. flash45 兜底：`flash_45.(mp3|wav|ogg)`
5. `useBGM:true` → 直接播放过渡 BGM（非循环）
6. 仍无：flash45 静默，其它 style 回退过渡 BGM

> 建议一次性音效长度 0.4s~2s，首帧无静音。

### 常见示例

| 需求              | 调用参数                                                                | 说明           |
| ----------------- | ----------------------------------------------------------------------- | -------------- |
| 固定 4 秒照片闪回 | `style:'flash45', duration:4000, images:[...], sound:'flash_45.wav'`    | 不随图片数变化 |
| 基础心跳过渡      | `style:'flash12'`                                                       | 默认 3s + 粒子 |
| 只换 BGM          | `style:'flash12', useBGM:true`                                          | 不放一次性音效 |
| 静默黑场          | `style:'flash12', duration:1200, sound:undefined` + 自定义 CSS 隐藏元素 | 需要自定样式   |

### 自定义新 style（示例 petal）

1. 在 `scene_transition.js` : `if(style==='petal'){ ... }` 生成花瓣 DOM。
2. 在 `styles.css` 增加 `[data-style='petal']` 样式与 `@keyframes petalFall`。
3. 放置 `assets/audio/transition_petal.wav`（可省略）。
4. 调用 `this.ctx.go('transition',{ next:'future', style:'petal', tip:'花瓣慢慢落下…' });`

### 预加载建议

```js
['mem_4_1.jpg', 'mem_4_2.jpg'].forEach((n) => {
  const img = new Image();
  img.src = './assets/images/' + n;
});
```

在用户任意首次点击后预热音频上下文以避免自动播放阻止。

### 音频命名规范（统一 `flash_<from><to>`）

仅保留新规范：转场一次性音效采用 `flash_<from><to>`（数字拼接，不加下划线）；不再使用旧 `scene_<from><to>`。

| 类型           | 命名模式                         | 示例                           | 说明                                                             |
| -------------- | -------------------------------- | ------------------------------ | ---------------------------------------------------------------- |
| 场景 BGM       | `scene_<x>.mp3`                  | `scene_1.mp3`, `scene_5.mp3`   | 每个主要场景一个主 BGM（使用 mp3；若需无损可并行放 wav）。       |
| 转场一次性音效 | `flash_<from><to>.(mp3/wav/ogg)` | `flash_12.mp3`, `flash_45.mp3` | 从场景 `<from>` 跳到 `<to>` 的独特过渡（数字拼接，不加下划线）。 |

命名解读：

- 进入场景 5：主 BGM 仍使用 `scene_5.mp3`（BGM 前缀不变）。
- 从 1 → 2 的转场：使用 `flash_12.mp3`。
- 从 4 → 5 的转场：使用 `flash_45.mp3`。

推荐实践：

1. 新增转场直接放置 `flash_<from><to>.mp3`，可省略 `sound`。
2. 多变体用后缀：`flash_12_alt1.mp3`（显式传 `sound`）。
3. `transition_<style>` 仅作应急兜底，不再新增此前缀文件。
4. wav 仅用于短促高瞬态（<2s），常规统一 mp3。
5. 无 `flash_12` 时可补 `flash_12.mp3` 或使用 `transition_flash12.mp3` 获得区分度。

（当前代码：显式 `sound` > `flash_<from><to>` > `transition_<style>` > `flash_45` 兜底 > BGM/静默。）

---

## 成就系统

**说明（当前实现 & 使用指南）**

- 每个场景可设计若干成就（Achievement），达成后可在终章汇总展示。
- 成就可分为“隐藏成就”（需特定操作触发）与“显性成就”（如全对、无提示等）。

- 建议的成就数据结构（终章展示用）：`{ id, title, desc, hidden: true/false, achieved: false }`。

- **当前代码实现**
  - 模块：`js/core/achievements.js`，导出单例 `achievements`。
  - 场景内触发：通过事件驱动，场景调用 `achievements.recordEvent(name, payload)` 来记录可供判定的事件（例如：`achievements.recordEvent('scene0:entered_birthday', { pass })`）。
  - 注册成就：`achievements.register(id, meta, predicate)`。predicate 接收当前事件队列并返回 boolean 或 Promise<boolean>，用于判定是否达成。
- **主要 API（当前已实现）：**
  - `achievements.recordEvent(name, payload)` — 记录事件并触发检测。
  - `achievements.register(id, meta, predicate)` — 注册成就条件与元数据。
  - `achievements.getUnlocked()` — 返回一个 Set，包含已解锁的 id。
  - `achievements.unlock(id)` — 强制解锁（测试/管理员用）。
  - `achievements.clearAll()` — 清空已解锁（开发调试用）。
- 持久化：已解锁成就以 localStorage 键 `birthday_unlocked_achievements_v1` 保存（只保存 id 列表）。
- 通知：成就解锁时模块会派发全局事件 `achievement:unlocked`（CustomEvent，detail: { id, meta }），并显示页面 toast 提示。

- **已实现成就**

| 成就 ID | 标题         | 描述                                                           | descriptionVisible |
| ------- | ------------ | -------------------------------------------------------------- | ------------------ |
| `0-0`   | 注册成功     | 使用正确密码注册成功。                                         | true               |
| `0-1`   | 发现生日彩蛋 | 注册页面输入指定生日密码。                                     | false              |
| `0-2`   | 记性真差     | 注册页面点击“我忘了”按钮 5 次。                                | false              |
| `0-3`   | 执着的尝试   | 注册页面密码错误 6 次。                                        | false              |
| `1-0`   | 通关第一幕   | 完成了第一幕的考试，进入下一段记忆。                           | true               |
| `2-0`   | 通关第二幕   | 完成了第二幕的考试，进入下一段记忆。                           | true               |
| `2-1`   | 超级学霸     | 第二幕考试一次通过（未使用提示、无跳过、无宠溺错误）。         | true               |
| `2-2`   | 我帮你做啦   | 本次考试每题均由宠溺跳过通过。                                 | false              |
| `2-3`   | 被提示包圆   | 本次考试每题都靠第三次提示自动通过。                           | false              |
| `2-4`   | 错误也可爱   | 本次考试每题均为宠溺错误方式完成（全部答错走宠溺逻辑）。       | false              |
| `3-0`   | 通关第三幕   | 完成了第三幕的数织，进入下一段记忆。                           | true               |
| `3-1`   | 心灵手巧     | 完成所有数织而没有使用提示。                                   | true               |
| `3-2`   | 叛逆心理     | 涂色与正确答案完全相反。                                       | false              |
| `3-3`   | 快！准！狠！ | 完成一张数织：没有点错、没有用重置、没有擦除过。               | false              |
| `8-0`   | 完成旅程     | 到达终章，完成整个旅程。                                       | true               |
| `8-1`   | 极速通关     | 在注册后十分钟内完成旅程（默认窗口 10 分钟，可通过代码调整）。 | true               |

- **预期 / 推荐实现（可在后续迭代中添加）**
  - `achievements.getAll()` 或 `achievements.listRegistered()`：返回所有已注册成就及其 meta，便于终章直接渲染完整清单。
  - `achievements.isUnlocked(id)`：语义化检查已解锁状态的辅助方法。
  - Application 层 wrapper：在 `SceneManager` / `ctx` 上提供 `this.ctx.achieve(id)` 与 `this.ctx.getAchievements()` 便于场景开发者使用统一接口（可实现为对 `achievements` 的轻量封装）。
  - 终章展示：统一数据结构与 API 后，在终章渲染完整成就列表并标注 `achieved` 状态。

---

## License

私人情感礼物项目（非商业）。如需二次传播请先移除私人素材。

> 祝：故事继续被认真书写，愿望都按计划一个个兑现。❤️

---

## 致谢

- 感谢王希涵、高天赐等人对项目开发、测试作出的贡献。

---

## 未使用构思：
